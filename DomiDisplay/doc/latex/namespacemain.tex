\hypertarget{namespacemain}{}\section{main 命名空间参考}
\label{namespacemain}\index{main@{main}}


程序的主文件，代码在此运行  


\subsection*{函数}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacemain_a39677d63980368745619bcd32200e768}{\+\_\+t\+DB}} (string)
\begin{DoxyCompactList}\small\item\em 在字符串最外面加上双引号 \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacemain_a8349c6affc6efc18c9afef83fec85e48}{search\+DB}} (db, table, condition=\char`\"{}\char`\"{}, fetch=-\/1, cols=\textquotesingle{} $\ast$\textquotesingle{}, Order\+By=None, is\+Desc=False)
\begin{DoxyCompactList}\small\item\em 数据库查找函数 \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacemain_ac89e4341171325314c0685e7f49d8015}{do\+Login}} (username, password)
\begin{DoxyCompactList}\small\item\em 检查用户名和密码是否正确 \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacemain_a4f4216d6a8208604c32b24da5feeaf68}{change\+Score}} (dom, score)
\begin{DoxyCompactList}\small\item\em 修改宿舍得分 \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacemain_ab4bfdca65955984f28c72a5d0daec565}{is\+File\+Illigel}} (filename)
\begin{DoxyCompactList}\small\item\em 文件是不是.\+xlsx,.xls的文件 \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacemain_a0deb3fcf5caed9b545bb317bc0f2486f}{is\+Img\+Illigel}} (imgname)
\begin{DoxyCompactList}\small\item\em 文件是不是图片 \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacemain_a7f709147939b2c6005d8efdddff85f7b}{upload\+Excel}} ()
\begin{DoxyCompactList}\small\item\em 上传\+Excel文件 \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacemain_a3b88a9c9308bfa2308ae6cf744a63e4c}{upload\+Image}} ()
\begin{DoxyCompactList}\small\item\em 上传图片 \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacemain_a8da19f25dec98a742cf10ab27b83bf73}{modify\+Domits}} (filename)
\item 
def \mbox{\hyperlink{group___xE8_xB7_xAF_xE7_x94_xB1_xE5_x87_xBD_xE6_x95_xB0_gab78667d84f4fdf0575af2adb306417c4}{homepage}} ()
\begin{DoxyCompactList}\small\item\em 主页，url\+:\textquotesingle{}/\textquotesingle{} \end{DoxyCompactList}\item 
def \mbox{\hyperlink{group___xE8_xB7_xAF_xE7_x94_xB1_xE5_x87_xBD_xE6_x95_xB0_ga037a19c20276c539ad0c761b8d54e36f}{display\+Dom}} (dominame)
\begin{DoxyCompactList}\small\item\em 展示宿舍页面，url\+:\textquotesingle{}/display/$<$dominame$>$\textquotesingle{} \end{DoxyCompactList}\item 
def \mbox{\hyperlink{group___xE8_xB7_xAF_xE7_x94_xB1_xE5_x87_xBD_xE6_x95_xB0_gac7ef9122c03a3279b6d1d904f4a16150}{modify}} ()
\begin{DoxyCompactList}\small\item\em 后台修改页面,url\+:\textquotesingle{}/modify/\textquotesingle{} \end{DoxyCompactList}\item 
def \mbox{\hyperlink{group___xE8_xB7_xAF_xE7_x94_xB1_xE5_x87_xBD_xE6_x95_xB0_ga4a5118733a16e40bc747937152312ab0}{login}} ()
\begin{DoxyCompactList}\small\item\em 登录界面,url\+:\textquotesingle{}/login/\textquotesingle{} \end{DoxyCompactList}\item 
def \mbox{\hyperlink{group___xE8_xB7_xAF_xE7_x94_xB1_xE5_x87_xBD_xE6_x95_xB0_ga6065500a38cb05f19a9613bdc7ac05f1}{logout}} ()
\begin{DoxyCompactList}\small\item\em 登出 \end{DoxyCompactList}\item 
def \mbox{\hyperlink{group___xE8_xB7_xAF_xE7_x94_xB1_xE5_x87_xBD_xE6_x95_xB0_gadc4862ff2e8d5f1dee064a0b2f9f3dc9}{uploadexcel}} ()
\begin{DoxyCompactList}\small\item\em 上传excel文件 \end{DoxyCompactList}\item 
def \mbox{\hyperlink{group___xE8_xB7_xAF_xE7_x94_xB1_xE5_x87_xBD_xE6_x95_xB0_gad28764d44d01ada36ff0dfbbcac903d5}{uploadimg}} ()
\begin{DoxyCompactList}\small\item\em 上传图像 \end{DoxyCompactList}\item 
def \mbox{\hyperlink{group___xE8_xB7_xAF_xE7_x94_xB1_xE5_x87_xBD_xE6_x95_xB0_gaf30661faaa34905b65c282bff34ede37}{clearimages}} ()
\begin{DoxyCompactList}\small\item\em 清除以前的全部图像 \end{DoxyCompactList}\item 
def \mbox{\hyperlink{group___xE8_xB7_xAF_xE7_x94_xB1_xE5_x87_xBD_xE6_x95_xB0_ga965cff435fee73194b14e9a6a7f3f2b8}{page\+\_\+not\+\_\+found}} (error)
\begin{DoxyCompactList}\small\item\em 404错误返回的页面 \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{变量}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacemain_a03b6adcdf574a0b20c970691677129e0}{app}} = Flask(\+\_\+\+\_\+name\+\_\+\+\_\+)
\begin{DoxyCompactList}\small\item\em 网站的app，里面保存着配置和功能(详见flask) \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacemain_a7ef04f98330fea890d64128141b0c6be}{seconds}}
\item 
\mbox{\hyperlink{group___xE8_xB7_xAF_xE7_x94_xB1_xE5_x87_xBD_xE6_x95_xB0_gad0a71fa7b4080e971323a6c3b1c16331}{methods}}
\item 
\mbox{\hyperlink{namespacemain_a800974c07a8e7de9888fff8cd98a827e}{debug}}
\end{DoxyCompactItemize}


\subsection{详细描述}
程序的主文件，代码在此运行 

\begin{DoxyAuthor}{作者}
Visual\+G\+MQ 
\end{DoxyAuthor}


\subsection{函数说明}
\mbox{\Hypertarget{namespacemain_a39677d63980368745619bcd32200e768}\label{namespacemain_a39677d63980368745619bcd32200e768}} 
\index{main@{main}!\_tDB@{\_tDB}}
\index{\_tDB@{\_tDB}!main@{main}}
\subsubsection{\texorpdfstring{\_tDB()}{\_tDB()}}
{\footnotesize\ttfamily def main.\+\_\+t\+DB (\begin{DoxyParamCaption}\item[{}]{string }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



在字符串最外面加上双引号 


\begin{DoxyParams}{参数}
{\em string} & 要加上双引号的字符串 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
加上双引号的string 
\end{DoxyReturn}
\begin{DoxySeeAlso}{参见}
\mbox{\hyperlink{namespacemain_a8349c6affc6efc18c9afef83fec85e48}{search\+D\+B()}}
\end{DoxySeeAlso}
这个函数用来给字符串最外面加上双引号，用于配合数据库查找函数来进行字符串拼接。 \mbox{\Hypertarget{namespacemain_a4f4216d6a8208604c32b24da5feeaf68}\label{namespacemain_a4f4216d6a8208604c32b24da5feeaf68}} 
\index{main@{main}!changeScore@{changeScore}}
\index{changeScore@{changeScore}!main@{main}}
\subsubsection{\texorpdfstring{changeScore()}{changeScore()}}
{\footnotesize\ttfamily def main.\+change\+Score (\begin{DoxyParamCaption}\item[{}]{dom,  }\item[{}]{score }\end{DoxyParamCaption})}



修改宿舍得分 


\begin{DoxyParams}{参数}
{\em dom} & 宿舍的名称 \\
\hline
{\em score} & 要修改的分数 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
修改成功返回\+True，否则返回\+False
\end{DoxyReturn}
这个函数会查找database/domis.db数据库，并且修改里面的score字段 \mbox{\Hypertarget{namespacemain_ac89e4341171325314c0685e7f49d8015}\label{namespacemain_ac89e4341171325314c0685e7f49d8015}} 
\index{main@{main}!doLogin@{doLogin}}
\index{doLogin@{doLogin}!main@{main}}
\subsubsection{\texorpdfstring{doLogin()}{doLogin()}}
{\footnotesize\ttfamily def main.\+do\+Login (\begin{DoxyParamCaption}\item[{}]{username,  }\item[{}]{password }\end{DoxyParamCaption})}



检查用户名和密码是否正确 


\begin{DoxyParams}{参数}
{\em username} & 用户输入的用户名 \\
\hline
{\em password} & 用户密码 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
成功返回\+True，失败返回\+False
\end{DoxyReturn}
这个函数会将用户输入的用户名和密码与database/user.db数据库匹配。 \mbox{\Hypertarget{namespacemain_ab4bfdca65955984f28c72a5d0daec565}\label{namespacemain_ab4bfdca65955984f28c72a5d0daec565}} 
\index{main@{main}!isFileIlligel@{isFileIlligel}}
\index{isFileIlligel@{isFileIlligel}!main@{main}}
\subsubsection{\texorpdfstring{isFileIlligel()}{isFileIlligel()}}
{\footnotesize\ttfamily def main.\+is\+File\+Illigel (\begin{DoxyParamCaption}\item[{}]{filename }\end{DoxyParamCaption})}



文件是不是.\+xlsx,.xls的文件 


\begin{DoxyParams}{参数}
{\em filename} & 文件的名称 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
如果满足格式返回\+True，否则返回\+False 
\end{DoxyReturn}
\begin{DoxySeeAlso}{参见}
\mbox{\hyperlink{namespacemain_a0deb3fcf5caed9b545bb317bc0f2486f}{is\+Img\+Illigel()}}
\end{DoxySeeAlso}
这个函数会检查你给出的文件名称里面有没有.\+xlsx或者.\+xlsx来确定这个文件是不是excel文件。 \mbox{\Hypertarget{namespacemain_a0deb3fcf5caed9b545bb317bc0f2486f}\label{namespacemain_a0deb3fcf5caed9b545bb317bc0f2486f}} 
\index{main@{main}!isImgIlligel@{isImgIlligel}}
\index{isImgIlligel@{isImgIlligel}!main@{main}}
\subsubsection{\texorpdfstring{isImgIlligel()}{isImgIlligel()}}
{\footnotesize\ttfamily def main.\+is\+Img\+Illigel (\begin{DoxyParamCaption}\item[{}]{imgname }\end{DoxyParamCaption})}



文件是不是图片 


\begin{DoxyParams}{参数}
{\em imgname} & 文件的名称 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
如果是图片返回\+True 
\end{DoxyReturn}
\begin{DoxySeeAlso}{参见}
\mbox{\hyperlink{namespacemain_ab4bfdca65955984f28c72a5d0daec565}{is\+File\+Illigel()}}
\end{DoxySeeAlso}
这个函数会查找imgname里面是否有.\+jpg .jpeg .png .bmp .gif文件，从而判断是否是图片。 \mbox{\Hypertarget{namespacemain_a8da19f25dec98a742cf10ab27b83bf73}\label{namespacemain_a8da19f25dec98a742cf10ab27b83bf73}} 
\index{main@{main}!modifyDomits@{modifyDomits}}
\index{modifyDomits@{modifyDomits}!main@{main}}
\subsubsection{\texorpdfstring{modifyDomits()}{modifyDomits()}}
{\footnotesize\ttfamily def main.\+modify\+Domits (\begin{DoxyParamCaption}\item[{}]{filename }\end{DoxyParamCaption})}

\mbox{\Hypertarget{namespacemain_a8349c6affc6efc18c9afef83fec85e48}\label{namespacemain_a8349c6affc6efc18c9afef83fec85e48}} 
\index{main@{main}!searchDB@{searchDB}}
\index{searchDB@{searchDB}!main@{main}}
\subsubsection{\texorpdfstring{searchDB()}{searchDB()}}
{\footnotesize\ttfamily def main.\+search\+DB (\begin{DoxyParamCaption}\item[{}]{db,  }\item[{}]{table,  }\item[{}]{condition = {\ttfamily \char`\"{}\char`\"{}},  }\item[{}]{fetch = {\ttfamily -\/1},  }\item[{}]{cols = {\ttfamily \textquotesingle{}$\ast$\textquotesingle{}},  }\item[{}]{Order\+By = {\ttfamily None},  }\item[{}]{is\+Desc = {\ttfamily False} }\end{DoxyParamCaption})}



数据库查找函数 


\begin{DoxyParams}{参数}
{\em condition} & 给出查找条件，条件中不需要加上\+W\+H\+E\+R\+E，会自动将这个参数和\+W\+H\+E\+R\+E语句拼接 \\
\hline
{\em fetch} & 决定cursor获得多少数据：
\begin{DoxyItemize}
\item 1：执行.\+fetchone()获取一条数据
\item $>$1：执行.\+fetchmany()获取多条数据
\item $<$1：执行.\+fetchall()获取所有数据 默认为-\/1 
\end{DoxyItemize}\\
\hline
{\em table} & 要查找的表名 \\
\hline
{\em cols} & 要匹配的列名，默认为全部匹配 \\
\hline
{\em Order\+By} & 是否按序查找，默认不按序查找。可以传入按序的列名（只能按照一列） \\
\hline
{\em is\+Desc} & 在按序查找的情况下是否降序查找，默认为\+False \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
返回查询结果，使用元组返回
\end{DoxyReturn}
如果db为\+None，那么函数会通过你给出的参数来进行一次性查询（在内部打开和关闭数据库）。 如果db为已经生成的数据库链接，那么查询之后不会关闭数据库。 \mbox{\Hypertarget{namespacemain_a7f709147939b2c6005d8efdddff85f7b}\label{namespacemain_a7f709147939b2c6005d8efdddff85f7b}} 
\index{main@{main}!uploadExcel@{uploadExcel}}
\index{uploadExcel@{uploadExcel}!main@{main}}
\subsubsection{\texorpdfstring{uploadExcel()}{uploadExcel()}}
{\footnotesize\ttfamily def main.\+upload\+Excel (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



上传\+Excel文件 

\begin{DoxySeeAlso}{参见}
\mbox{\hyperlink{namespacemain_a3b88a9c9308bfa2308ae6cf744a63e4c}{upload\+Image()}} \mbox{\hyperlink{namespacemain_ab4bfdca65955984f28c72a5d0daec565}{is\+File\+Illigel()}}
\end{DoxySeeAlso}
上传用户选择的excel文件 \mbox{\Hypertarget{namespacemain_a3b88a9c9308bfa2308ae6cf744a63e4c}\label{namespacemain_a3b88a9c9308bfa2308ae6cf744a63e4c}} 
\index{main@{main}!uploadImage@{uploadImage}}
\index{uploadImage@{uploadImage}!main@{main}}
\subsubsection{\texorpdfstring{uploadImage()}{uploadImage()}}
{\footnotesize\ttfamily def main.\+upload\+Image (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



上传图片 

\begin{DoxySeeAlso}{参见}
\mbox{\hyperlink{namespacemain_a7f709147939b2c6005d8efdddff85f7b}{upload\+Excel()}} \mbox{\hyperlink{namespacemain_a0deb3fcf5caed9b545bb317bc0f2486f}{is\+Img\+Illigel()}}
\end{DoxySeeAlso}
上传用户选择的图片 

\subsection{变量说明}
\mbox{\Hypertarget{namespacemain_a03b6adcdf574a0b20c970691677129e0}\label{namespacemain_a03b6adcdf574a0b20c970691677129e0}} 
\index{main@{main}!app@{app}}
\index{app@{app}!main@{main}}
\subsubsection{\texorpdfstring{app}{app}}
{\footnotesize\ttfamily main.\+app = Flask(\+\_\+\+\_\+name\+\_\+\+\_\+)}



网站的app，里面保存着配置和功能(详见flask) 

\mbox{\Hypertarget{namespacemain_a800974c07a8e7de9888fff8cd98a827e}\label{namespacemain_a800974c07a8e7de9888fff8cd98a827e}} 
\index{main@{main}!debug@{debug}}
\index{debug@{debug}!main@{main}}
\subsubsection{\texorpdfstring{debug}{debug}}
{\footnotesize\ttfamily main.\+debug}

\mbox{\Hypertarget{namespacemain_a7ef04f98330fea890d64128141b0c6be}\label{namespacemain_a7ef04f98330fea890d64128141b0c6be}} 
\index{main@{main}!seconds@{seconds}}
\index{seconds@{seconds}!main@{main}}
\subsubsection{\texorpdfstring{seconds}{seconds}}
{\footnotesize\ttfamily main.\+seconds}

